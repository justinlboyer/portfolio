<!DOCTYPE HTML>
<html>
	<head>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-131406991-1"></script>
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'UA-131406991-1');
	</script>
	

	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Avalanche Project</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="" />
	<meta name="keywords" content="" />
	<meta name="author" content="" />

  <!-- Facebook and Twitter integration -->
	<meta property="og:title" content=""/>
	<meta property="og:image" content=""/>
	<meta property="og:url" content=""/>
	<meta property="og:site_name" content=""/>
	<meta property="og:description" content=""/>
	<meta name="twitter:title" content="" />
	<meta name="twitter:image" content="" />
	<meta name="twitter:url" content="" />
	<meta name="twitter:card" content="" />

	<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
	<link rel="shortcut icon" href="favicon.ico">

	<link href="https://fonts.googleapis.com/css?family=Quicksand:300,400,500,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,400i,700" rel="stylesheet">
	
	<!-- Animate.css -->
	<link rel="stylesheet" href="css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="css/icomoon.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="css/bootstrap.css">
	<!-- Flexslider  -->
	<link rel="stylesheet" href="css/flexslider.css">
	<!-- Flaticons  -->
	<link rel="stylesheet" href="fonts/flaticon/font/flaticon.css">
	<!-- Owl Carousel -->
	<link rel="stylesheet" href="css/owl.carousel.min.css">
	<link rel="stylesheet" href="css/owl.theme.default.min.css">
	<!-- Theme style  -->
	<link rel="stylesheet" href="css/style.css">

	<!-- Modernizr JS -->
	<script src="js/modernizr-2.6.2.min.js"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
	<script src="js/respond.min.js"></script>
	<![endif]-->

	</head>
	<body>
	<div id="colorlib-page">
		<div class="container-wrap">
      <!--
		<a href="index.html" class="js-colorlib-nav-toggle colorlib-nav-toggle" data-toggle="collapse" aria-expanded="false" aria-controls="navbar"><i></i></a>-->
		<aside id="colorlib-aside" role="complementary" class="border js-fullheight">
			<div class="text-center">
				<div class="author-img" style="background-image: url(images/about.jpg);"></div>
				<h1 id="colorlib-logo"><a href="index.html">Justin Boyer</a></h1>
				<span class="position"><a href="https://www.linkedin.com/in/justin-l-boyer/">Data Scientist</a> in Utah</span>
			</div>
			<nav id="colorlib-main-menu" role="navigation" class="navbar">
        <ul>
          <li class="active"><a href="index.html">Home</a></li>
          <li><a href="index.html#about">About</a></li>
          <li><a href="index.html#services">Services</a></li>
          <li><a href="index.html#skills">Skills</a></li>
          <li><a href="index.html#education">Education</a></li>
          <li><a href="index.html#experience" >Experience</a></li>
          <li><a href="index.html#projects">Projects</a></li>
<!--						<li><a href="#" data-nav-section="blog">Blog</a></li>-->
          <li><a href="index.html#contact">Contact</a></li>
        </ul>
			</nav>

			<div class="colorlib-footer">
				<p><sub>&copy; <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="icon-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --> </span></p>
				<ul>
					<li><a href="#"><i class="icon-facebook2"></i></a></li>
					<li><a href="#"><i class="icon-twitter2"></i></a></li>
					<li><a href="#"><i class="icon-instagram"></i></a></li>
					<li><a href="#"><i class="icon-linkedin2"></i></a></li>
				</ul>
			</div>

		</aside>

		<div id="colorlib-main">
            <section class="colorlib-about" >
				<div class="colorlib-narrow-content">
					<div class="row">
						<div class="col-md-12">
							<div class="row row-bottom-padded-sm animate-box" data-animate-effect="fadeInLeft">
								<div class="col-md-12">
									<div class="about-desc">
										<span class="heading-meta">Avalanches</span>
										<h2 class="colorlib-heading">Predicting Avalanches</h2>
										<p>I enjoy skiing in the backcountry.  The conditions that are ripe for an avalance are often related to the current weather conditions.  Because of this I decided to build a model that indicates whether or not the current conditions are likely to cause an avalanche.
										</p>
										<p>The data I used came from the observations hosted at the Utah Avalanche Center's website, I joined this data to the NOAA's Alta Guard station by date.  The main concerns regarding this data are that the avalanche observations are self reported, this could cause events to be missed.  For example, on days in which the avalanche danger is considerably high, no one may report the occurences of avalanches, because no one is in the field.  There are other potential issues with self reported data, for example the reporter may get the elevation or other feature incorrect.  All in all, this is a toy model and should only be used to provide additional information.
										</p>
										<p>I tried various different models, settling on a gradient boosted model.  The final model was trained on 3857 observations.  The results of the model's performance on a hold out test set are below:</p>
										<p>The Model's accuracy is 0.9067, the AUC score is 0.9611.  This means roughly that if we randomly selected an event in which an avalanche occured the model has a 96% chance of rating this event as an avalanche over a non-avalanche event. 
										</p>
											<table style="width:75%">
												<tr>
												  <th></th>
												  <th>Precision</th>
												  <th>Recall</th>
												  <th>F1 Score</th>
												  <th>Support</th>
												</tr>
												<tr>
												  <td>No avalance</td>
												  <td>0.88</td>
												  <td>0.82</td>
												  <td>0.85</td>
												  <td>247</td>
												</tr>
												<tr>
												  <td>Avalanche</td>
												  <td>0.92</td>
												  <td>0.95</td>
												  <td>0.93</td>
												  <td>525</td>
												</tr>
												<p><br></p>
												<tr>
													<td>Micro Average</td>
													<td>0.91</td>
													<td>0.91</td>
													<td>0.91</td>
													<td>772</td>
												</tr>
												<tr>
													<td>Macro Avgerage</td>
													<td>0.90</td>
													<td>0.88</td>
													<td>0.89</td>
													<td>772</td>
												</tr>
											  </table> 
										<p><br></p>
                                        <p>The gradient boosted model was chosen over others based on the micro averaged F1 score and the high recall for the avalanche class.  I wanted a model that is conservative in the sense that if there is any indication of conditions in which there could be an avalanche, it flags it as one.
										</p>
										<img src="images/av_feature_importance_gb.png" alt="Feature Importance">
										<p>
											Not suprisingly the top feature is elevation with precipitation and snow depth contributing about 30% of the explained variance and snow fall, max and min temperature and max wind speed contributing the remaining 50%.  This is interesting because the fact that precipitation and snow depth are such important features provides additional evidence that it is not necessarily about how much "snow" falls, it is about how much the snow was loaded.  I tried some engineered features, such as snow water equivalent as well as features pertaining to how much snow/weight has been added, non of which provided additional information to the model (and were dropped).
										</p>
										<p>
											This model definitely could be improved by feeding it a sliding window of previous weather conditions.  If this were the case, I can imagine that wind speed would play a more prominent role.  I dropped a feature that encoded "aspect" from the feature list, because so many observations of avalanches occured on northerly aspects that the feature was providing inaccurate predictions.  But I do think the model might have some improvement if the aspects were rolled up into 4 features, North, South, East, and West.  Lastly, when I have the time I'd like to explore day of year as a feature as well.  If you are interested in exploring any of this please do not hesitate to <a href="index.html#contact">contact</a> me! 
										</p>
										<p>
											To do: summary of model simulations.  
										</p>
									</div>
								</div>
                            </div>
                        </div>
                    </div>
				</div>
			<!--
            </section>
			<section class="colorlib-about" >
			-->
				<div class="colorlib-narrow-content">
					<div class="row row-bottom-padded-sm animate-box" data-animate-effect="fadeInRight">
						<span class="heading-meta">Avalanche Flagger</span>
					</div>
					<div class="row ">
						<form action = "https://avalanche-api.herokuapp.com/avalanche_model" method = "post" onsubmit="submitForm(event, this)">
							<p><strong> Note:  This is a toy model.  In other words, do not use this model to make a decision about whether or not to ski in the backcountry!</strong>  The model is hosted on a heroku under the free tier, so sometimes it takes a second to run.</p>
								<div class="col-md-4 animate-box" data-animate-effect="fadeInLeft">
									<p>Elevation (in feet):</p>
									<p><input type = "text" placeholder="9240" name = "Elevation" /></p>
									<p>Precipitation (in inches):</p>
									<p><input type = "text" placeholder="0.4" name = "Precipitation" /></p>
									<p>Snow Depth (in inches):</p>
									<p><input type = "text" placeholder="63" name = "Snow_Depth" /></p>
									<p>Snowfall (in inches):</p>
									<p><input type = "text" placeholder="3.3" name = "Snowfall" /></p>
								</div>
								<div class="col-md-4 animate-box" data-animate-effect="fadeInLeft">
									<p>Max Temperature (in Farenheit):</p>
									<p><input type = "text" placeholder="32" name = "Max_Temperature" /></p>
									<p>Min Temperature (in Farenheit):</p>
									<p><input type = "text" placeholder="17" name = "Min_Temperature" /></p>
									<p>Max Wind Speed:</p>
									<p><input type = "text" placeholder="12" name = "Max_Wind_Speed" /></p>
									<p><br><input type = "submit" value = "submit" /></p>
								</div>
								<div class="col-md-4 animate-box" data-animate-effect="fadeInRight">
												<h4>Output: </h4>
												<p>The model predicts:</p>
												<h5 id="avy">No results yet</h5>
												<p>With probability</p>
												<h5 id="avalanche_probability">Input values and click submit</h5>
								</div>
								
						</form>
					</div>
				</div>
			</section>
			<section class="colorlib-about" >
				<div class="colorlib-narrow-content animate-box" data-animate-effect="fadeInLeft">
					<span class="heading-meta">Model Simulation</span>
					<p>
						In order to identify some of the models failings I tested the model at various levels for two given features; a level with the minimum possible values, at the average values, and at the maximum values.  
					</p>
					<div class="row">
						<div class="col-md-12 row animate-box" data-animate-effect="fadeInRight">
							<div class="column">
								<img src="images/pr_v_el_min.png" alt="Precipitation vs. Elevation with minimum 	settings" style="width:105%">
							</div>
							<div class="column">
								<img src="images/pr_v_el_avg.png" alt="Precipitation vs. Elevation with average settings" style="width:105%">
							</div>
							<div class="column">
								<img src="images/pr_v_el_max.png" alt="Precipitation vs. Elevation with maximum settings" style="width:105%">
							</div>
						</div>
					</div>
					<p>
						The graphs above are a heatmap of the probabilities of an avalanche occuring at precipitation levels ranging from 0 to 50mm and elevations ranging from 6000 to 12000 feet.  The three different graphs have different settings for the other features.  Notice how at the minimum settings (far left graph), the probability of an avalanche occuring is higher across more values for precipitation and elevation, similarly at maximum values (far right graph).  This is evidence that the data the model was trained on is not robust enough.  In these situations there are few observations and are likely from professionals.
					</p>
					<p>
						It is interesting to note the in the average conditions there is a band of elevations (~9300-9500 ft) that regardless of precipitation levels are likely to avalanche.  This is the elevation of many popular backcountry routes in the Wasatch.  
					</p>
					<p>
						The simulations indicate that given typical situations the model is performing within reason.  Evidenced by the model predicting avalanches in situations (precipation, elevations, snow depths, etc..) in which one would expect avalanches to occur.  However there are some pecularities that might indicate overfitting, such as fine bands where avalanches don't have a probability of occuring.  However for outlier events (minimums or maximums) the model should not be trusted.  I have included many of the plots that are indicative of the above argument.
					</p>
					<div class="row">
						<div class="col-md-12 row animate-box" data-animate-effect="fadeInRight">
							<div class="column">
								<img src="images/sd_v_el_min.png" alt="Snow Depth vs. Elevation with minimum 	settings" style="width:105%">
							</div>
							<div class="column">
								<img src="images/sd_v_el_avg.png" alt="Snow Depth vs. Elevation with average settings" style="width:105%">
							</div>
							<div class="column">
								<img src="images/sd_v_el_max.png" alt="Precipitation vs. Elevation with maximum settings" style="width:105%">
							</div>
						</div>
					</div>
					<p>
						I truncated the above charts to snow depts < 4000mm because there are no changes to the avalanche probabilities for increasing snow depths.
					</p>
					<div class="row">
						<div class="col-md-12 row animate-box" data-animate-effect="fadeInRight">
							<div class="column">
								<img src="images/sf_v_el_min.png" alt="Snow fall vs. Elevation with minimum 	settings" style="width:105%">
							</div>
							<div class="column">
								<img src="images/sf_v_el_avg.png" alt="Snow fall vs. Elevation with average settings" style="width:105%">
							</div>
							<div class="column">
								<img src="images/sf_v_el_max.png" alt="Snow fall vs. Elevation with maximum settings" style="width:105%">
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-12 row animate-box" data-animate-effect="fadeInRight">
							<div class="column">
								<img src="images/mn_v_mx_min.png" alt="Min Temperature vs. Max Temperature with minimum 	settings" style="width:105%">
							</div>
							<div class="column">
								<img src="images/mn_v_mx_avg.png" alt="Min Temperature vs. Max Temperature with average settings" style="width:105%">
							</div>
							<div class="column">
								<img src="images/mn_v_mx_max.png" alt="Min Temperature vs. Max Temperature with maximum settings" style="width:105%">
							</div>
						</div>
					</div>
				</div>
			</section>
		</div>
		</div>
		
		<script>
			function submitForm(e, form){
			e.preventDefault();
			
			fetch('https://avalanche-api.herokuapp.com/avalanche_model', {
			method: 'POST',
			headers: {'Accept': 'application/json','Content-Type': 'text/plain'},
			body: JSON.stringify({Elevation: form.Elevation.value, Precipitation: form.Precipitation.value, Snow_Depth: form.Snow_Depth.value, Snowfall: form.Snowfall.value, Max_Temperature: form.Max_Temperature.value, Min_Temperature: form.Min_Temperature.value, Max_Wind_Speed: form.Max_Wind_Speed.value}, {mode: 'cors'})
				}).then(function(response) {
				return response.json();
				}).then(function(data) {
					document.getElementById("avy").innerHTML = JSON.stringify(data["Outputs"]["Avalanche"]);
					document.getElementById("avalanche_probability").innerHTML = JSON.stringify(data["Outputs"]["Probability"]);
				}).catch(function(err) {
					document.getElementById("avalanche").innerHTML = "ERROR fetching data!";
				alert('Error')
				});
			}
		</script>
    </body>


</div><!-- end:colorlib-main -->
</div><!-- end:container-wrap -->
</div><!-- end:colorlib-page -->

<!-- jQuery -->
<script src="js/jquery.min.js"></script>
<!-- jQuery Easing -->
<script src="js/jquery.easing.1.3.js"></script>
<!-- Bootstrap -->
<script src="js/bootstrap.min.js"></script>
<!-- Waypoints -->
<script src="js/jquery.waypoints.min.js"></script>
<!-- Flexslider -->
<script src="js/jquery.flexslider-min.js"></script>
<!-- Owl carousel -->
<script src="js/owl.carousel.min.js"></script>
<!-- Counters -->
<script src="js/jquery.countTo.js"></script>


<!-- MAIN JS -->
<script src="js/main.js"></script>

</body>
</html>
